<div class="ui container">
  <h1>FS ISAC Alerts</h1>
  <h3>Total: <%= FsIsacAlert.count %></h3>
  <h3>Showing: <%= @alerts.size %></h3>

  <%= render 'fs_isac_alerts/search' %>

  <%= link_to "Download ALL these results as CSV", fs_isac_alerts_path(params.to_unsafe_hash.merge(format: :csv)) %>
  <br>
  <%= link_to("Pull alerts down from Exchange server", fs_isac_alerts_refresh_path)%>

  <%= will_paginate @alerts %>
</div>

<table class="ui striped celled table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Tracking ID</th>
      <th>Title</th>
      <th>Alert timestamp</th>
      <th>Severity</th>
      <th>Are we vulnerable?</th>
      <th>Resolved?</th>
    </tr>
  </thead>
  <tbody>
    <% @alerts.each do |record| %>
      <tr>
        <td><%= link_to record.id, fs_isac_alert_path(record) %></td>
        <td><%= record.tracking_id                            %></td>
        <td><%= record.title                                  %></td>
        <td><%= record.alert_timestamp                        %></td>
        <td><%= record.severity                               %></td>
        <td><%= mark_as_applies record                        %></td>
        <td><%= resolve_fs_isac record                        %></td>
      </tr>
    <% end %>
  </tbody>
</table>
